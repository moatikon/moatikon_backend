name: deploy

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the main branch
  push:
    branches:
      - main

jobs:
  SSH:
    runs-on: ubuntu-latest

    steps:
      - name: Deploy to EC2
        uses: ssh -i ${{ secrets.SSH_PRIVATE_KEY }} ec2-user@43.203.91.114 -p 22
        with:
          script: |
            cd moatikon_backend/
            git pull
            docker compose up -d --build
